//The details of the configuration object needs to be set, including the card token credentials:
<script src="https://web.judopay.com/js/0.0.26/judopay.min.js"></script>

<script>
  window.addEventListener('load', (event) => {

    // Setup
    const judopay = new JudoPay();

    const config =  {
      isGeoLocationGatheringAllowed: true,
    };
    
    const paymentSession = "my-payment-session-here"

    judopay.createCardDetails('jupay-payment-iframe', config);

    const tokenConfiguration = {
        judoId: "1234567",
        amount: 10.00,
        currency: "GBP",
        phoneCountryCode: "44",
        mobileNumber: "07999999999",
        emailAddress: "contact@judopay.com",
        challengeRequestIndicator: "noPreference",
        scaExemption: "lowValue",
        initialRecurringPayment: false,
        yourConsumerReference: "my-consumer-reference",
        yourPaymentReference: "my-payment-reference",
        billingAddress: {
                  address1: "41 Luke Street",
                  address2: "",
                  town: "London",
                  country: "GB",
                  postcode: "EC2A 4DP",
                  countryCode: 826,
                  state: "FL"
        },   

      //
      // token specific params
      cardToken: "my-card-token-here", 
      cardHolderName: "my-name-here", // Mandatory
      shouldVerifySecurityCode: true
    }

    const onTokenPaymentClick = () => {
      judopay.invokeTokenPayment(paymentSession, tokenConfiguration).then(response => {
        console.log(response);
      }).catch(error => {
        console.log(error);
      });
    };

    const onTokenPreAuthClick = () => {
      judopay.invokeTokenPreAuth(paymentSession, tokenConfiguration).then(response => {
        console.log(response);
      }).catch(error => {
        console.log(error);
      });
    };

      // Here you can customise the Security Code (CVV/CV2) modal styles
      //       const securityCodeModalStyle = {
      //         labelTextContent: 'Security code',
      //         inputPlaceholder: 'Type your code here',
      //         buttonTextContent: 'Submit',
      //         style: {
      //             form: {
      //                 padding: '20px 16px',
      //                 maxWidth: '300px',
      //                 margin: 'auto',
      //                 width: '80%',
      //                 borderRadius: '4px'
      //             },
      //             field: {
      //                 width: '100%',
      //                 padding: '8px',
      //                 color: '#999999'
      //             },
      //             label: {
      //                 width: '100%',
      //                 padding: '8px 0px 8px 0px',
      //                 color: '#999999'
      //             },
      //             button: {
      //                 backgroundColor: '#222',
      //                 borderRadius: '4px',
      //                 borderStyle: 'none',
      //             }
      //         }
      // }
      // judopay.invokeTokenPayment(paymentSession, tokenConfiguration, securityCodeModalStyle)
      // or
      // judopay.invokeTokenPreAuth(paymentSession, tokenConfiguration, securityCodeModalStyle)


    document.getElementById('token-payment-button').addEventListener('click', onTokenPaymentClick);
    document.getElementById('token-pre-auth-button').addEventListener('click', onTokenPreAuthClick);
  });
</script>
